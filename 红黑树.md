为什么要用红黑树
--
* 二叉搜索树（Binary Search Tree,BST）

二叉排序树，又称二叉查找树、二叉搜索树。

二叉排序树是具有下列性质的二叉树：

若左子树不空，则左子树上所有结点的值均小于它的根结点的值；
若右子树不空，则右子树上所有结点的值均大于或等于它的根结点的值；
左、右子树也分别为二叉排序树。

二叉排序树的性能取决于二叉树的层数：

最好的情况是 O(logn)，存在于完全二叉排序树情况下，其访问性能近似于折半查找；

最差时候会是 O(n)，比如插入的元素是有序的，生成的二叉排序树就是一个链表，这种情况下，需要遍历全部元素才行（见下图 b）。

![二叉搜索树](https://github.com/huijuanl/MarkdownPhotos/blob/master/QQ%E6%88%AA%E5%9B%BE20180825143906.png?raw=true)

* AVL树

AVL树是最先发明的自平衡二叉查找树。

在二叉查找树强制一般要求以外，对于任何AVL树我们增加了如下的额外要求：

在AVL树中任何节点的两个儿子子树的高度最大差别为一，所以它也被称为高度平衡树。

![AVL树](https://github.com/huijuanl/MarkdownPhotos/blob/master/AVL%E6%A0%91.png?raw=true)

查找、插入和删除在平均和最坏情况下都是O(log n)。插入和删除可能需要通过一次或多次树旋转来重新平衡这个树。

二叉平衡树的严格平衡策略以牺牲建立查找结构(插入，删除操作)的代价，换来了稳定的O(logN) 的查找时间复杂度。但是这样做是否值得呢？

能不能找一种折中策略，即不牺牲太大的建立查找结构的代价，也能保证稳定高效的查找效率呢？ 答案就是：红黑树。

* 红黑树(RBT)

 红黑树的性质：
红黑树是每个节点都带有颜色属性的二叉查找树，颜色为红色或黑色。在二叉查找树强制一般要求以外，对于任何有效的红黑树我们增加了如下的额外要求：

1. 节点是红色或黑色。
2. 根是黑色。
3. 所有叶子都是黑色（叶子是NIL节点）。
4. 每个红色节点必须有两个黑色的子节点。（从每个叶子到根的所有路径上不能有两个连续的红色节点。）
5. 从任一节点到每个叶子节点的所有路径都包含相同数目的黑色节点。
  
![红黑树](https://github.com/huijuanl/MarkdownPhotos/blob/master/%E7%BA%A2%E9%BB%91%E6%A0%91.png?raw=true)

* 红黑树和AVL树有什么区别

首先红黑树是不符合AVL树的平衡条件的，即每个节点的左子树和右子树的高度最多差1的二叉查找树。但是提出了为节点增加颜色，红黑是用非严格的平衡来换取增删节点时候旋转次数的降低，任何不平衡都会在三次旋转之内解决，而AVL是严格平衡树，因此在插入或者删除节点的时候，根据不同情况，旋转的次数比红黑树要多。所以红黑树的插入效率更高！！！

红黑树是牺牲了严格的高度平衡的优越条件为代价红黑树能够以O(log2 n)的时间复杂度进行搜索、插入、删除操作。此外，由于它的设计，任何不平衡都会在三次旋转之内解决。当然，还有一些更好的，但实现起来更复杂的数据结构能够做到一步旋转之内达到平衡，但红黑树能够给我们一个比较“便宜”的解决方案。红黑树的算法时间复杂度和AVL相同，但统计性能比AVL树更高.

AVL树是高度平衡的，频繁的插入和删除，会引起频繁的reblance，导致效率下降

红黑树不是高度平衡的，算是一种折中，插入最多两次旋转，删除最多三次旋转

总结
--  
AVL和RBT都是BST的优化。其性能要远远好于二叉查找树。他们之间都有自己的优势，其应用上也有不同。

结构对比：AVL的结构高度平衡，RBT的结构基本平衡。平衡度AVL > RBT.

查找对比： AVL 查找时间复杂度最好，最坏情况都是O(logN)。
          RBT 查找时间复杂度最好为O(logN)，最坏情况下比AVL略差。

插入删除对比：  
> 1. AVL的插入和删除结点很容易造成树结构的不平衡，而RBT的平衡度要求较低。因此在大量数据插入的情况下，RBT需要通过旋转变色操作来重新达到平衡的频度要小于AVL。

> 2. 如果需要平衡处理时，RBT比AVL多一种变色操作，而且变色的时间复杂度在O(logN)数量级上。但是由于操作简单，所以在实践中这种变色仍然是非常快速的。

> 3. 当插入一个结点都引起了树的不平衡，AVL和RBT都最多需要2次旋转操作。但删除一个结点引起不平衡后，AVL最多需要logN 次旋转操作，而RBT最多只需要3次。因此两者插入一个结点的代价差不多，但删除一个结点的代价RBT要低一些。

> 4. AVL和RBT的插入删除代价主要还是消耗在查找待操作的结点上。因此时间复杂度基本上都是与O(logN) 成正比的。

总体评价：大量数据实践证明，RBT的总体统计性能要好于平衡二叉树。

参考链接
--
https://blog.csdn.net/zjkc050818/article/details/78266303

http://www.cnblogs.com/skywang12345/p/3245399.html
